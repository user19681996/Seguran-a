<!doctype html><html lang='pt-BR'><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width,initial-scale=1'/><title>ORION F7 Master</title><style>body{background:#0b0f14;color:#00ffcc;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0}.wrap{max-width:980px;margin:0 auto;padding:24px}.card{background:rgba(255,255,255,.04);border:1px solid rgba(0,255,204,.25);border-radius:14px;padding:18px;margin:14px 0}h1,h2{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}label{display:block;margin:10px 0 6px;color:#a9ffe9}input,select{width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.35);color:#fff}button{padding:12px 14px;border-radius:10px;border:1px solid rgba(0,255,204,.35);background:#00ffcc;color:#001b17;font-weight:700;cursor:pointer}small{color:#98b8b2}.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}pre{white-space:pre-wrap;background:rgba(0,0,0,.35);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.12)}a{color:#8fffe7}nav{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px}nav a{background:rgba(255,255,255,.04);border:1px solid rgba(0,255,204,.2);padding:8px 10px;border-radius:10px;text-decoration:none}@media(max-width:720px){.row{grid-template-columns:1fr}}</style></head><body><div class='wrap'><nav><a href='./register.html'>Registrar</a><a href='./login.html'>Login</a><a href='./dashboard.html'>Dashboard</a><a href='./master.html'>Master</a><a href='./audit.html'>Audit</a></nav><h1>Master Admin</h1><div class='card'><button onclick='tenants()'>Listar tenants</button><pre id='tOut'></pre></div><div class='card'><h2>Atualizar plano</h2><div class='row'><div><label>Tenant ID</label><input id='tid' placeholder='2'/></div><div><label>Plano</label><select id='plan'><option>FREE</option><option>PRO</option><option>ENT</option></select></div></div><button onclick='upd()'>Atualizar</button><pre id='u'></pre></div><script>const API='http://localhost:8000';function setToken(t){localStorage.setItem('orion_token',t)}function getToken(){return localStorage.getItem('orion_token')||''}function clearToken(){localStorage.removeItem('orion_token')}async function api(path,opts={}){const headers=opts.headers||{};if(!headers['Content-Type']&&opts.body)headers['Content-Type']='application/json';const tok=getToken();if(tok)headers['Authorization']='Bearer '+tok;const res=await fetch(API+path,{...opts,headers});const text=await res.text();let data;try{data=JSON.parse(text)}catch{data={raw:text}};if(!res.ok)throw new Error((data&&(data.detail||data.error))||('HTTP '+res.status));return data;}
async function tenants(){try{tOut.textContent=JSON.stringify(await api('/admin/tenants'),null,2)}catch(e){tOut.textContent='Erro: '+e.message}} async function upd(){try{u.textContent=JSON.stringify(await api('/admin/tenant_plan',{method:'POST',body:JSON.stringify({tenant_id:Number(tid.value),plan:plan.value,subscription_status:'active'})}),null,2);await tenants();}catch(e){u.textContent='Erro: '+e.message}}</script></div></body></html>